{
    "TargetCapacity": 1,
    "AllocationStrategy": "lowestPrice",
    "IamFleetRole": "arn:aws:iam::${AWS_ACCOUNT_ID}:role/${FLEET_ROLE_NAME}",
    "Type": "request",
    "InstanceInterruptionBehavior": "terminate",
    "LaunchSpecifications": [
        {
            "SecurityGroups": [
                {
                    "GroupId": "${EC2_SG_ID}"
                }
            ],
            "IamInstanceProfile": {
                "Arn": "arn:aws:iam::${AWS_ACCOUNT_ID}:instance-profile/${ROLE_NAME}"
            },
            "KeyName": "${KEY_NAME}",
            "ImageId": "${IMAGE_ID}",
            "Placement": {
                "AvailabilityZone": "${AWS_ZONES}"
            },
            "TagSpecifications": [
                {
                    "ResourceType": "instance",
                    "Tags": [
                        {
                            "Key": "Name",
                            "Value": "scpc: ${run_sh} ${args}"
                        }
                    ]
                }
            ],
            "SubnetId": "${SUBNET_IDS}",
            "UserData": "${user_data}",
            "InstanceRequirements": {
                "VCpuCount": {
                    "Min": ${ncpu}
                },
                "MemoryMiB": {
                    "Min": ${nmib}
                },
                "AcceleratorCount": {
                    "Min": ${ngpu}
                },
                "AcceleratorManufacturers": [
                    ${acc_man}
                ]
            }
        }
    ],
    "TagSpecifications": [
        {
            "ResourceType": "spot-fleet-request",
            "Tags": [
                {
                    "Key": "Name",
                    "Value":"scpc: ${run_sh} ${args}"
                },
            ]
        }
    ]
}